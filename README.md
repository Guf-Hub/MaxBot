# MaxBot - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API MAX

<div align="center">
  <img src="src/logo.jpg" alt="MaxBot Logo" width="200" height="200">

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Apps Script](https://img.shields.io/badge/Google%20Apps%20Script-Library-blue.svg)](https://script.google.com/)
[![MAX API](https://img.shields.io/badge/MAX%20API-Documentation-green.svg)](https://dev.max.ru/docs-api)

</div>

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API MAX –≤ Google Apps Script —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤–µ–±—Ö—É–∫–æ–≤, –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤, –∫–ª–∞–≤–∏–∞—Ç—É—Ä –∏ –º–µ—Ç–æ–¥–æ–≤ API.

## üì¶ ID –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Apps Script

```
1dUzlK1qVuXOB8OOKgWazEBtCSbFRqIUv9F0-yQXM4K9xk6UlH-Ks2aOU
```

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [API –º–µ—Ç–æ–¥—ã](#api-–º–µ—Ç–æ–¥—ã)
- [–ü—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∏–º–µ—Ä—ã)
- [–í–µ–±—Ö—É–∫–∏](#–≤–µ–±—Ö—É–∫–∏)
- [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –°–ø–æ—Å–æ–± 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ [Google Apps Script](https://script.google.com/)**
2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç**
3. **–î–æ–±–∞–≤—å—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É MaxBot:**
   - –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ `+` —Ä—è–¥–æ–º —Å "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏"
   - –í–≤–µ–¥–∏—Ç–µ ID –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: `1dUzlK1qVuXOB8OOKgWazEBtCSbFRqIUv9F0-yQXM4K9xk6UlH-Ks2aOU`
   - –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é
   - –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å"

### –°–ø–æ—Å–æ–± 2: –ü–æ–ª–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

1. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç Apps Script**
2. **–î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª—ã:**
   - –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bot.gs` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑ `bot/bot.js`
   - –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `builders.gs` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑ `bot/builders.js`
   - –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `errors.gs` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑ `bot/errors.js`
   - –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `types.gs` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑ `bot/types.js`
   - –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `utils.gs` –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑ `bot/utils.js`

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –Ω–∞ [dev.max.ru](https://dev.max.ru/docs/chatbots/bots-coding/prepare)
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞

### –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
// –ò–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫—É)
const { Bot } = MaxBot;

// –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–æ—Ç–∞
const bot = new Bot("YOUR_ACCESS_TOKEN");

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ—Ç–µ
const botInfo = bot.getMe();
console.log("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ:", botInfo);

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
bot.sendMessage({
  text: "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!",
  chatId: "CHAT_ID",
});
```

### –° –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ —Å–æ–±—ã—Ç–∏–π

```javascript
class MyBot extends Bot {
  onMessage(message) {
    const chatId = message.recipient.data.chat_id;
    const text = message.body.text;

    if (text === "/start") {
      this.sendMessage({
        text: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!",
        chatId: chatId,
      });
    } else {
      this.sendMessage({
        text: `–í—ã –Ω–∞–ø–∏—Å–∞–ª–∏: ${text}`,
        chatId: chatId,
      });
    }
  }

  onCallback(callback) {
    const chatId = callback.chat_id;
    const payload = callback.payload;

    this.sendMessage({
      text: `–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞: ${payload}`,
      chatId: chatId,
    });
  }
}

const myBot = new MyBot("YOUR_ACCESS_TOKEN");
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±—Ö—É–∫–∞

```javascript
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±—Ö—É–∫–∞
const webhookUrl = "https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec";
bot.setWebhook(webhookUrl);

// –£–¥–∞–ª–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞
bot.deleteWebhook();
```

## üîß API –º–µ—Ç–æ–¥—ã

### üè† –ú–µ—Ç–æ–¥—ã –±–æ—Ç–∞

- `getMe()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –±–æ—Ç–µ
- `updateMe(updates)` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ—Ç–µ
- `getMyCommands()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
- `setMyCommands(commands)` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
- `deleteMyCommands()` - –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞

### üí¨ –ú–µ—Ç–æ–¥—ã —á–∞—Ç–æ–≤

- `getChats(count, marker)` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- `getChatByLink(chatLink)` - –ü–æ–ª—É—á–µ–Ω–∏–µ —á–∞—Ç–∞ –ø–æ —Å—Å—ã–ª–∫–µ –∏–ª–∏ username
- `getChat(chatId)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —á–∞—Ç–µ
- `updateChat(chatId, updates)` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —á–∞—Ç–µ
- `deleteChat(chatId)` - –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–∞
- `sendChatAction(chatId, action)` - –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –≤ —á–∞—Ç (typing, upload_photo, etc.)
- `getPinnedMessage(chatId)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `pinMessage(chatId, messageId, notify)` - –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `unpinMessage(chatId)` - –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

### üë• –ú–µ—Ç–æ–¥—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

- `getMyChatMember(chatId)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —á–ª–µ–Ω—Å—Ç–≤–µ –±–æ—Ç–∞
- `leaveChat(chatId)` - –í—ã—Ö–æ–¥ –∏–∑ —á–∞—Ç–∞
- `getChatAdmins(chatId)` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- `setChatAdmins(chatId, admins)` - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- `deleteChatAdmin(chatId, userId)` - –£–¥–∞–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `getChatMembers(chatId, userIds, marker, count)` - –ü–æ–ª—É—á–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–∞—Ç–∞
- `addChatMembers(chatId, userIds)` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —á–∞—Ç
- `removeChatMember(chatId, userId, block)` - –£–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏–∑ —á–∞—Ç–∞

### üì® –ú–µ—Ç–æ–¥—ã —Å–æ–æ–±—â–µ–Ω–∏–π

- `getMessages(chatId, messageIds, from, to, count)` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- `sendMessage(options)` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- `editMessage(messageId, messageBody)` - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `deleteMessage(messageId)` - –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `getMessage(messageId)` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `getVideoInfo(videoToken)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–∏–¥–µ–æ
- `answerCallback(callbackId, callbackAnswer)` - –û—Ç–≤–µ—Ç –Ω–∞ callback

### üîó –ú–µ—Ç–æ–¥—ã –≤–µ–±—Ö—É–∫–æ–≤

- `getWebhooks()` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
- `setWebhook(url, updateTypes, secret, version)` - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `removeWebhook(url)` - –û—Ç–ø–∏—Å–∫–∞ –æ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- `getUpdates(limit, timeout, marker, types)` - –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### üìÅ –ú–µ—Ç–æ–¥—ã —Ñ–∞–π–ª–æ–≤

- `getUploadUrl(type)` - –ü–æ–ª—É—á–µ–Ω–∏–µ URL –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
  - `type` - –¢–∏–ø —Ñ–∞–π–ª–∞: `"image"`, `"video"`, `"audio"`, `"file"`

### üéØ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

- `handleUpdate(update)` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç –≤–µ–±—Ö—É–∫–∞
- `onMessage(message)` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è)
- `onCallback(callback)` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–æ–∫ (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è)
- `onChatMember(chatMember)` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è)
- `onChatAction(chatAction)` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π –≤ —á–∞—Ç–µ (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è)

## üõ†Ô∏è –ë–∏–ª–¥–µ—Ä—ã

### ‚å®Ô∏è KeyboardBuilder

–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä:

- `callback(text, payload)` - Callback –∫–Ω–æ–ø–∫–∞
- `link(text, url)` - –ö–Ω–æ–ø–∫–∞-—Å—Å—ã–ª–∫–∞
- `contact(text)` - –ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `location(text)` - –ó–∞–ø—Ä–æ—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- `app(text, appId)` - –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `message(text)` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- `row()` - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É
- `build()` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

### üì∏ MediaBuilders

#### PhotoBuilder

- `url(url)` - URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `caption(caption)` - –ü–æ–¥–ø–∏—Å—å –∫ —Ñ–æ—Ç–æ
- `format(format)` - –§–æ—Ä–º–∞—Ç –ø–æ–¥–ø–∏—Å–∏ (markdown/html)
- `build()` - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Ñ–æ—Ç–æ

#### VideoBuilder

- `url(url)` - URL –≤–∏–¥–µ–æ
- `caption(caption)` - –ü–æ–¥–ø–∏—Å—å –∫ –≤–∏–¥–µ–æ
- `keyboard(keyboard)` - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
- `build()` - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤–∏–¥–µ–æ

#### AudioBuilder

- `url(url)` - URL –∞—É–¥–∏–æ
- `title(title)` - –ù–∞–∑–≤–∞–Ω–∏–µ
- `performer(performer)` - –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
- `caption(caption)` - –ü–æ–¥–ø–∏—Å—å
- `build()` - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∞—É–¥–∏–æ

#### FileBuilder

- `url(url)` - URL —Ñ–∞–π–ª–∞
- `caption(caption)` - –ü–æ–¥–ø–∏—Å—å –∫ —Ñ–∞–π–ª—É
- `build()` - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Ñ–∞–π–ª–∞

#### LocationBuilder

- `coordinates(lat, lng)` - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- `title(title)` - –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞
- `address(address)` - –ê–¥—Ä–µ—Å
- `build()` - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è

#### ContactBuilder

- `phone(phone)` - –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- `firstName(name)` - –ò–º—è
- `lastName(name)` - –§–∞–º–∏–ª–∏—è
- `build()` - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞

### üìù CommandBuilder

–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞:

- `add(name, description)` - –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
- `start(description)` - –ö–æ–º–∞–Ω–¥–∞ /start
- `help(description)` - –ö–æ–º–∞–Ω–¥–∞ /help
- `menu(description)` - –ö–æ–º–∞–Ω–¥–∞ /menu
- `settings(description)` - –ö–æ–º–∞–Ω–¥–∞ /settings
- `profile(description)` - –ö–æ–º–∞–Ω–¥–∞ /profile
- `info(description)` - –ö–æ–º–∞–Ω–¥–∞ /info
- `contact(description)` - –ö–æ–º–∞–Ω–¥–∞ /contact
- `feedback(description)` - –ö–æ–º–∞–Ω–¥–∞ /feedback
- `language(description)` - –ö–æ–º–∞–Ω–¥–∞ /language
- `notifications(description)` - –ö–æ–º–∞–Ω–¥–∞ /notifications
- `clear()` - –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
- `build()` - –°–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ –∫–æ–º–∞–Ω–¥
- `buildDefault()` - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥
- `buildMinimal()` - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥

## üìö –ü—Ä–∏–º–µ—Ä—ã

### –ü–æ–ª–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–°–º–æ—Ç—Ä–∏—Ç–µ –ø–∞–ø–∫—É `examples/` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤:

- `bot.js` - –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–º–µ—Ä –±–æ—Ç–∞
- `media.js` - –†–∞–±–æ—Ç–∞ —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏
- `keyboard.js` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
- `command.js` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
- `error-handling.js` - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

```javascript
// –ü—Ä–æ—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
bot.sendMessage({
  text: "–ü—Ä–∏–≤–µ—Ç!",
  chatId: "CHAT_ID",
});

// –°–æ–æ–±—â–µ–Ω–∏–µ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
bot.sendMessage({
  text: "**–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**",
  chatId: "CHAT_ID",
  format: "markdown",
});

// –°–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
const keyboard = bot.keyboard
  .callback("–ö–Ω–æ–ø–∫–∞ 1", "btn1")
  .callback("–ö–Ω–æ–ø–∫–∞ 2", "btn2")
  .build();

bot.sendMessage({
  text: "–í—ã–±–µ—Ä–∏—Ç–µ:",
  chatId: "CHAT_ID",
  keyboard,
});
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤

```javascript
// –§–æ—Ç–æ
const photo = bot.photo
  .url("https://example.com/photo.jpg")
  .caption("–ö—Ä–∞—Å–∏–≤–æ–µ —Ñ–æ—Ç–æ!")
  .build();

bot.sendMessage({
  text: photo.caption,
  chatId: "CHAT_ID",
  photo: photo.photo,
});

// –í–∏–¥–µ–æ
const video = bot.video
  .url("https://example.com/video.mp4")
  .caption("–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –≤–∏–¥–µ–æ")
  .build();

bot.sendMessage({
  text: video.caption,
  chatId: "CHAT_ID",
  video: video.video,
});

// –ê—É–¥–∏–æ
bot.sendMessage({
  text: "–ú—É–∑—ã–∫–∞",
  chatId: "CHAT_ID",
  audio: "https://example.com/audio.mp3",
  title: "–ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Å–Ω–∏",
  performer: "–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å",
});

// –§–∞–π–ª
bot.sendMessage({
  text: "–î–æ–∫—É–º–µ–Ω—Ç",
  chatId: "CHAT_ID",
  file: "https://example.com/document.pdf",
});

// –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
bot.sendMessage({
  text: "–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ",
  chatId: "CHAT_ID",
  latitude: 55.7558,
  longitude: 37.6176,
  title: "–ú–æ—Å–∫–≤–∞",
  address: "–ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å",
});

// –ö–æ–Ω—Ç–∞–∫—Ç
bot.sendMessage({
  text: "–ö–æ–Ω—Ç–∞–∫—Ç",
  chatId: "CHAT_ID",
  phone_number: "+79001234567",
  first_name: "–ò–≤–∞–Ω",
  last_name: "–ò–≤–∞–Ω–æ–≤",
});
```

## üåê –í–µ–±—Ö—É–∫–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `doPost`:

```javascript
function doPost(e) {
  try {
    const data = JSON.parse(e.postData.contents);
    myBot.handleWebhook(data);
    return ContentService.createTextOutput("OK");
  } catch (error) {
    console.error("–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–µ–±—Ö—É–∫–∞:", error);
    return ContentService.createTextOutput("ERROR");
  }
}
```

2. –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –∫–∞–∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–µ–±—Ö—É–∫:

```javascript
const webhookUrl = "https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec";
bot.setWebhook(webhookUrl);
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

```javascript
class MyBot extends Bot {
  onMessage(message) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
  }

  onCallback(callback) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–æ–∫
  }

  onChatMember(chatMember) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–∞—Ç–∞
  }

  onMessageEdited(messageEdited) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
  }

  onMessageDeleted(messageDeleted) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
  }

  onBotAdded(botAdded) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞ –≤ —á–∞—Ç
  }

  onBotRemoved(botRemoved) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –±–æ—Ç–∞ –∏–∑ —á–∞—Ç–∞
  }
}
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

```javascript
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –Ω–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
function createTrigger() {
  ScriptApp.newTrigger("checkUpdates").timeBased().everyMinutes(5).create();
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
function checkUpdates() {
  const updates = myBot.getUpdates();
  updates.forEach((update) => {
    myBot.handleUpdate(update);
  });
}
```

## ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫

```javascript
try {
  const result = bot.sendMessage({
    text: "–¢–µ—Å—Ç",
    chatId: "invalid_chat_id",
  });
} catch (error) {
  if (error instanceof MaxError) {
    console.error(`MAX API –æ—à–∏–±–∫–∞: ${error.code} - ${error.message}`);
  } else {
    console.error(`–û–±—â–∞—è –æ—à–∏–±–∫–∞: ${error.message}`);
  }
}
```

### MaxError

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ API MAX:

- `status` - HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥
- `code` - –ö–æ–¥ –æ—à–∏–±–∫–∏ –æ—Ç API
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
- `response` - –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π

### HTTP_CODES

–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã HTTP –∫–æ–¥–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤:

- `200` - –£—Å–ø–µ—à–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
- `400` - –ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `401` - –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `404` - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `405` - –ú–µ—Ç–æ–¥ –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
- `429` - –ü—Ä–µ–≤—ã—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- `503` - –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

```javascript
async function sendMessageWithRetry(bot, options, maxRetries = 3) {
  let retryCount = 0;

  while (retryCount < maxRetries) {
    try {
      const result = bot.sendMessage(options);
      return result;
    } catch (error) {
      retryCount++;
      if (retryCount >= maxRetries) {
        throw error;
      }

      // –ñ–¥–µ–º –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–æ–π
      await new Promise((resolve) => setTimeout(resolve, 1000 * retryCount));
    }
  }
}
```

## üîß –£—Ç–∏–ª–∏—Ç—ã

### URLParams

–ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ URL:

- `append(key, value)` - –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä
- `toString()` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–æ–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `has(key)` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- `get(key)` - –ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- `delete(key)` - –£–¥–∞–ª–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä
- `clear()` - –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### –§—É–Ω–∫—Ü–∏–∏ —É—Ç–∏–ª–∏—Ç

- `createURLParams()` - –°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç URLParams
- `toUnixTimestamp(date)` - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞—Ç—É –≤ Unix timestamp
- `isValidId(value)` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å ID
- `isValidNumber(value, min, max)` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —á–∏—Å–ª–∞
- `isValidArray(value)` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –º–∞—Å—Å–∏–≤–∞
- `safeAssign(...objects)` - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

- **Markdown**: `format: 'markdown'`
- **HTML**: `format: 'html'`

### –¢–∏–ø—ã –∫–Ω–æ–ø–æ–∫

- `callback` - Callback –∫–Ω–æ–ø–∫–∞
- `link` - –°—Å—ã–ª–∫–∞
- `request_contact` - –ó–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `request_geo_location` - –ó–∞–ø—Ä–æ—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- `open_app` - –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `message` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Apps Script

1. **–ö–≤–æ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 6 —á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å
2. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: –º–∞–∫—Å–∏–º—É–º 6 –º–∏–Ω—É—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å
3. **HTTP –∑–∞–ø—Ä–æ—Å—ã**: –º–∞–∫—Å–∏–º—É–º 20,000 –≤ –¥–µ–Ω—å
4. **–†–∞–∑–º–µ—Ä –∫–æ–¥–∞**: –º–∞–∫—Å–∏–º—É–º 50 –ú–ë

### –û—Ç–ª–∞–¥–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä Apps Script
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–í—ã–ø–æ–ª–Ω–µ–Ω–∏—è"
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](src/LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ Apps Script
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API MAX: https://dev.max.ru/docs-api

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –∏ –Ω–µ —Å–≤—è–∑–∞–Ω —Å MAX. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫.
